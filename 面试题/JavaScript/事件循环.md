# 事件循环

js是一门单线程语言, 意味着同一时间只能做一件事,但是并不意味着单线程就是阻塞, 实现单线程非阻塞的方法就是事件循环

在js中任务分为以下两种:

- 同步任务: 立即执行的任务, 会直接进入执行栈中执行, 除异步任务以外的所有js代码都是同步任务

- 异步任务: 异步执行的任务, 不会立即执行, 需要等到某个时机到达之后才会执行,  如ajax请求, setTimeout计时器等等

     同时异步任务又可细分为以下两类:

  - 宏任务: setTimeout , setInerval计时器, requestAnimation,dom事件等
  - 微任务: promise(then,catch), MutationObserver

事件循环的三大机制:

- 执行栈
- 事件监听线程(监听异步任务的执行时机何时到达)
- 事件队列

事件循环原则:

​    js引擎会优先执行同步任务, 当碰到异步任务时, 会将其交给事件监听线程来监测该异步任务何时触发, 当其触发时, 会将对应的回调函数添加到事件队列(宏任务加到宏任务队列, 微任务加到微任务队列). 当执行栈栈空后, js引擎会取出事件队列中(微任务队列优先)的第一个任务进行执行. 以此循环, 形成事件循环